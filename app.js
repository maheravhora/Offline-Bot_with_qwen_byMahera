const _0x166938=_0x580b;(function(_0xb79e93,_0x46ab0c){const _0x2c8259=_0x580b,_0x27a6a5=_0xb79e93();while(!![]){try{const _0x446425=-parseInt(_0x2c8259(0x157))/0x1*(-parseInt(_0x2c8259(0x162))/0x2)+parseInt(_0x2c8259(0x17c))/0x3+parseInt(_0x2c8259(0x16d))/0x4*(-parseInt(_0x2c8259(0x164))/0x5)+parseInt(_0x2c8259(0x135))/0x6+parseInt(_0x2c8259(0x163))/0x7*(parseInt(_0x2c8259(0x192))/0x8)+-parseInt(_0x2c8259(0x183))/0x9*(parseInt(_0x2c8259(0x16a))/0xa)+-parseInt(_0x2c8259(0x17f))/0xb*(parseInt(_0x2c8259(0x18c))/0xc);if(_0x446425===_0x46ab0c)break;else _0x27a6a5['push'](_0x27a6a5['shift']());}catch(_0x368685){_0x27a6a5['push'](_0x27a6a5['shift']());}}}(_0x4d21,0x292f1));import*as _0x1c02eb from'https://esm.run/@mlc-ai/web-llm';const downloadBtn=document[_0x166938(0x136)](_0x166938(0x144)),modelSelect=document[_0x166938(0x136)]('model-select'),progressContainer=document[_0x166938(0x136)]('progress-container'),progressBar=document[_0x166938(0x136)](_0x166938(0x13c)),progressText=document[_0x166938(0x136)](_0x166938(0x187)),initPanel=document[_0x166938(0x136)](_0x166938(0x189)),chatContainer=document[_0x166938(0x136)](_0x166938(0x13d)),userInput=document[_0x166938(0x136)](_0x166938(0x146)),sendBtn=document[_0x166938(0x136)](_0x166938(0x15f)),chatForm=document[_0x166938(0x136)](_0x166938(0x180)),statusBadge=document[_0x166938(0x136)](_0x166938(0x181)),typingIndicator=document[_0x166938(0x136)](_0x166938(0x18d)),deleteCacheBtn=document[_0x166938(0x136)](_0x166938(0x14f));function _0x580b(_0x19fc5d,_0xea11f1){const _0x4d2138=_0x4d21();return _0x580b=function(_0x580b80,_0x2ec4c0){_0x580b80=_0x580b80-0x135;let _0x274be3=_0x4d2138[_0x580b80];return _0x274be3;},_0x580b(_0x19fc5d,_0xea11f1);}function _0x4d21(){const _0x3ddf21=['224025mViVko','querySelector','assistant','66YhWsTZ','chat-form','status-badge','setInitProgressCallback','756wtqXlh','value','flex\x20items-start\x20gap-3\x20','system','progress-text','hidden','init-panel','trim','log','113052vkpaXB','typing-indicator','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','user','bg-neutral-800\x20border\x20border-neutral-700\x20text-gray-200\x20rounded-bl-none','width','8aVCVtk','239844hlpuhR','getElementById','<i\x20class=\x22fa-solid\x20fa-circle-notch\x20fa-spin\x20mr-2\x22></i>\x20Initializing\x20GPU...','Loading','remove','location','floor','progress-bar','chat-container','add','Error:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','System\x20purged.\x20Reloading\x20interface.','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','progress','download-btn','click','user-input','preventDefault','appendChild','completions','<span\x20class=\x22w-1.5\x20h-1.5\x20bg-emerald-500\x20rounded-full\x20inline-block\x20mr-1\x20animate-pulse\x22></span>\x20ONLINE','bg-emerald-900/20\x20border\x20border-emerald-500/50\x20text-emerald-500\x20text-[10px]\x20px-2\x20py-1\x20rounded\x20uppercase\x20tracking-wider\x20font-bold\x20flex\x20items-center','Purge\x20local\x20model\x20data?\x20You\x20will\x20need\x20to\x20re-download\x20the\x202.5GB\x20model\x20next\x20time.','submit','includes','delete-cache-btn','Finish\x20loading','<br>','create','<code\x20class=\x22bg-neutral-950\x20text-emerald-400\x20px-1.5\x20py-0.5\x20rounded\x20text-xs\x20border\x20border-neutral-700\x22>$1</code>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-8\x20h-8\x20rounded\x20bg-neutral-700\x20flex\x20items-center\x20justify-center\x20shrink-0\x20mt-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fa-solid\x20fa-user\x20text-neutral-400\x20text-xs\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','System\x20online.\x20I\x20am\x20**mahera.io**.\x20\x0a\x0aI\x20am\x20running\x20locally\x20on\x20your\x20device\x27s\x20hardware.\x20How\x20can\x20I\x20assist\x20you\x20today?','Cache\x20check\x20failed','38IWTRRX','reload','scrollHeight','innerHTML','div','Error','delete','flex','send-btn','addEventListener','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prose-content\x20break-words\x22>','16528unrvFs','1163897mmuTuw','7685fhCntq','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20max-w-[85%]\x20sm:max-w-[75%]\x20leading-relaxed\x20p-3\x20sm:p-4\x20rounded-2xl\x20text-sm\x20sm:text-base\x20shadow-sm\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.prose-content','Retry','bg-emerald-600\x20text-white\x20rounded-br-none','MLCEngine','7970LmgPiu','chat','keys','788xXfAnX','disabled','READY\x20TO\x20LOAD','text','scrollTop','className','innerText','replace','Initialization\x20Error:\x20','message','<b\x20class=\x22text-white\x20font-bold\x22>$1</b>','bg-emerald-900/30\x20border\x20border-emerald-500/30\x20text-emerald-400\x20text-[10px]\x20px-2\x20py-1\x20rounded\x20uppercase\x20tracking-wider\x20font-bold','webllm','style','classList'];_0x4d21=function(){return _0x3ddf21;};return _0x4d21();}let engine=null;async function checkCache(){const _0x17b828=_0x166938;try{const _0x421c85=await caches['keys'](),_0x1cfcee=_0x421c85['some'](_0x3fc011=>_0x3fc011[_0x17b828(0x14e)](_0x17b828(0x179)));_0x1cfcee&&(statusBadge['innerText']=_0x17b828(0x16f),statusBadge[_0x17b828(0x172)]=_0x17b828(0x178),downloadBtn[_0x17b828(0x15a)]='<i\x20class=\x22fa-solid\x20fa-power-off\x20mr-2\x22></i>\x20Power\x20On\x20System',deleteCacheBtn[_0x17b828(0x17b)][_0x17b828(0x139)](_0x17b828(0x188)));}catch(_0xa79784){console[_0x17b828(0x18b)](_0x17b828(0x156),_0xa79784);}}checkCache();const initProgressCallback=_0x4ad911=>{const _0x1a881d=_0x166938;console[_0x1a881d(0x18b)](_0x4ad911),progressContainer[_0x1a881d(0x17b)]['remove'](_0x1a881d(0x188));let _0x2d4356=0x0;if(_0x4ad911[_0x1a881d(0x143)])_0x2d4356=_0x4ad911[_0x1a881d(0x143)]*0x64;else _0x4ad911[_0x1a881d(0x170)][_0x1a881d(0x14e)](_0x1a881d(0x138))&&(_0x2d4356=0x32);progressBar[_0x1a881d(0x17a)][_0x1a881d(0x191)]=_0x2d4356+'%',progressText['innerText']=Math[_0x1a881d(0x13b)](_0x2d4356)+'%',_0x4ad911[_0x1a881d(0x170)][_0x1a881d(0x14e)](_0x1a881d(0x150))&&onModelLoaded();};async function onModelLoaded(){const _0x4442e2=_0x166938;initPanel['classList'][_0x4442e2(0x13e)]('hidden'),chatContainer[_0x4442e2(0x17b)][_0x4442e2(0x139)](_0x4442e2(0x188)),statusBadge['innerHTML']=_0x4442e2(0x14a),statusBadge['className']=_0x4442e2(0x14b),deleteCacheBtn[_0x4442e2(0x17b)]['remove']('hidden'),userInput[_0x4442e2(0x16e)]=![],sendBtn['disabled']=![],userInput['focus'](),appendMessage('assistant',_0x4442e2(0x155));}deleteCacheBtn[_0x166938(0x160)]('click',async()=>{const _0x473b5d=_0x166938;if(confirm(_0x473b5d(0x14c))){const _0x1a45e2=await caches[_0x473b5d(0x16c)]();let _0x23088e=0x0;for(const _0x356467 of _0x1a45e2){(_0x356467['includes'](_0x473b5d(0x179))||_0x356467[_0x473b5d(0x14e)]('mlc'))&&(await caches[_0x473b5d(0x15d)](_0x356467),_0x23088e++);}alert(_0x473b5d(0x141)),window[_0x473b5d(0x13a)][_0x473b5d(0x158)]();}}),downloadBtn['addEventListener'](_0x166938(0x145),async()=>{const _0x37f447=_0x166938,_0x203a94=modelSelect[_0x37f447(0x184)];downloadBtn[_0x37f447(0x16e)]=!![],downloadBtn[_0x37f447(0x15a)]=_0x37f447(0x137);try{engine=new _0x1c02eb[(_0x37f447(0x169))](),engine[_0x37f447(0x182)](initProgressCallback),await engine[_0x37f447(0x158)](_0x203a94);}catch(_0x3a6497){console['error'](_0x3a6497),progressText[_0x37f447(0x173)]=_0x37f447(0x15c),alert(_0x37f447(0x175)+_0x3a6497[_0x37f447(0x176)]),downloadBtn[_0x37f447(0x16e)]=![],downloadBtn[_0x37f447(0x173)]=_0x37f447(0x167);}}),chatForm[_0x166938(0x160)](_0x166938(0x14d),async _0x3263a8=>{const _0x55ea26=_0x166938;_0x3263a8[_0x55ea26(0x147)]();const _0x45288d=userInput[_0x55ea26(0x184)][_0x55ea26(0x18a)]();if(!_0x45288d)return;appendMessage('user',_0x45288d),userInput[_0x55ea26(0x184)]='',typingIndicator[_0x55ea26(0x17b)][_0x55ea26(0x139)](_0x55ea26(0x188)),typingIndicator['classList'][_0x55ea26(0x13e)](_0x55ea26(0x15e)),chatContainer['scrollTop']=chatContainer[_0x55ea26(0x159)];const _0xddbc16=[{'role':_0x55ea26(0x186),'content':'You\x20are\x20mahera.io,\x20a\x20helpful\x20AI\x20assistant\x20running\x20offline.\x20You\x20are\x20concise,\x20intelligent,\x20and\x20technical.'},{'role':_0x55ea26(0x18f),'content':_0x45288d}];try{let _0x9eca57=appendMessage(_0x55ea26(0x17e),''),_0x28eaea='';const _0x596723=await engine[_0x55ea26(0x16b)][_0x55ea26(0x149)][_0x55ea26(0x152)]({'messages':_0xddbc16,'stream':!![]});typingIndicator[_0x55ea26(0x17b)][_0x55ea26(0x13e)](_0x55ea26(0x188)),typingIndicator['classList']['remove'](_0x55ea26(0x15e));for await(const _0x8a2247 of _0x596723){const _0x5935b1=_0x8a2247['choices'][0x0]['delta']['content'];_0x5935b1&&(_0x28eaea+=_0x5935b1,_0x9eca57[_0x55ea26(0x15a)]=markedParse(_0x28eaea),chatContainer['scrollTop']=chatContainer[_0x55ea26(0x159)]);}}catch(_0x2b80dc){typingIndicator[_0x55ea26(0x17b)]['add'](_0x55ea26(0x188)),appendMessage(_0x55ea26(0x17e),_0x55ea26(0x13f)+_0x2b80dc[_0x55ea26(0x176)]);}});function appendMessage(_0x399d0b,_0x415934){const _0x66c583=_0x166938,_0x54ca73=document['createElement'](_0x66c583(0x15b)),_0x2c81bd=_0x399d0b==='user';return _0x54ca73['className']=_0x66c583(0x185)+(_0x2c81bd?'justify-end':''),_0x54ca73[_0x66c583(0x15a)]=_0x66c583(0x140)+(!_0x2c81bd?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-8\x20h-8\x20rounded\x20bg-neutral-800\x20border\x20border-neutral-700\x20flex\x20items-center\x20justify-center\x20shrink-0\x20mt-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fa-solid\x20fa-microchip\x20text-emerald-500\x20text-xs\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>':'')+_0x66c583(0x165)+(_0x2c81bd?_0x66c583(0x168):_0x66c583(0x190))+_0x66c583(0x161)+markedParse(_0x415934)+_0x66c583(0x142)+(_0x2c81bd?_0x66c583(0x154):'')+_0x66c583(0x18e),chatContainer[_0x66c583(0x148)](_0x54ca73),chatContainer[_0x66c583(0x171)]=chatContainer['scrollHeight'],_0x54ca73[_0x66c583(0x17d)](_0x66c583(0x166));}function markedParse(_0x279970){const _0x8bd3d5=_0x166938;if(!_0x279970)return'';return _0x279970[_0x8bd3d5(0x174)](/\*\*(.*?)\*\*/g,_0x8bd3d5(0x177))[_0x8bd3d5(0x174)](/`([^`]+)`/g,_0x8bd3d5(0x153))[_0x8bd3d5(0x174)](/\n/g,_0x8bd3d5(0x151));}